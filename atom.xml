<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>神木林</title>
  
  <subtitle>天下虚怀皆空谷，何处高峰不入云</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.ykxkykx.cn/"/>
  <updated>2020-02-20T01:42:16.567Z</updated>
  <id>https://blog.ykxkykx.cn/</id>
  
  <author>
    <name>洛桤</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>cesium超速入门总结</title>
    <link href="https://blog.ykxkykx.cn/archives/284d6472.html"/>
    <id>https://blog.ykxkykx.cn/archives/284d6472.html</id>
    <published>2019-12-16T10:27:19.000Z</published>
    <updated>2020-02-20T01:42:16.567Z</updated>
    
    <content type="html"><![CDATA[<p>由于工作原因，做了一些有关 <code>cesium</code> 的三维地图开发。基于我所用到的功能，于此做一个入门总结，并记录下曾踩下的坑。初学者可依照以下整个完整流程，复现功能内容。做此记录时，<code>cesium</code> 版本为 <code>^1.64.0</code></p><p><em>注：这里虽然利用了 <code>npm</code> 或 <code>yarn</code> 来快速安装 <code>cesium</code> ，但实际的demo只需<strong>直接引用文件</strong>，不需要打包</em></p><hr><h2 id="测试用demo路径结构描述"><a href="#测试用demo路径结构描述" class="headerlink" title="测试用demo路径结构描述"></a>测试用demo路径结构描述</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cesium-demo</span><br><span class="line">├─node_modules/</span><br><span class="line">├─index.html</span><br><span class="line">└─package.json</span><br></pre></td></tr></table></figure><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h3><p>建议使用 VSCode 进行开发，并安装插件 <code>Live Server</code>，用于启动此 <code>index.html</code> 文件</p><h3 id="安装cesium"><a href="#安装cesium" class="headerlink" title="安装cesium"></a>安装cesium</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在 cesium-demo 目录下输入如下命令</span></span><br><span class="line">npm install --save cesium</span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">yarn add cesium</span><br></pre></td></tr></table></figure><h3 id="index-html文件初始化"><a href="#index-html文件初始化" class="headerlink" title="index.html文件初始化"></a>index.html文件初始化</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Cesium-test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./node_modules/cesium/Build/Cesium/Cesium.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    @<span class="keyword">import</span> url(<span class="string">"./node_modules/cesium/Build/Cesium/Widgets/widgets.css"</span>);</span></span><br><span class="line"><span class="css">    <span class="selector-tag">html</span>, <span class="selector-tag">body</span>, <span class="selector-id">#cesiumContainer</span> &#123;</span></span><br><span class="line"><span class="undefined">      width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"cesiumContainer"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> viewer = <span class="keyword">new</span> Cesium.Viewer(<span class="string">'cesiumContainer'</span>); <span class="comment">// 这里直接传入的也可以是获取到的cesiumContainer的dom元素对象</span></span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="初始界面预览"><a href="#初始界面预览" class="headerlink" title="初始界面预览"></a>初始界面预览</h3><p><img src="https://2jedwh.coding-pages.com/blog/2019/12/cesium-earth-1.png" alt="cesium地球"></p><h2 id="常用初始化配置"><a href="#常用初始化配置" class="headerlink" title="常用初始化配置"></a>常用初始化配置</h2><p>以下内容不会给出完整代码，但会给出完整核心代码片段，读者对照初始化 <code>index.html</code> 自行增添或者更改即可运行，若出现误差，可尝试把 <code>cesium</code> 版本调整到 <code>^1.64.0</code>。以下 <code>js</code> 代码均直接在 <code>script</code> 标签全局命名空间中出现。</p><h3 id="隐藏界面小控件"><a href="#隐藏界面小控件" class="headerlink" title="隐藏界面小控件"></a>隐藏界面小控件</h3><p>通过初试配置，将界面上默认显示的控件隐藏，以便进行自定义<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> Cesium.Viewer(<span class="string">'cesiumContainer'</span>, &#123;</span><br><span class="line">  animation: <span class="literal">false</span>, <span class="comment">// 隐藏界面左下角控制动画的面板</span></span><br><span class="line">  baseLayerPicker: <span class="literal">false</span>, <span class="comment">// 隐藏界面左上角地图底图的切换按钮</span></span><br><span class="line">  fullscreenButton: <span class="literal">false</span>, <span class="comment">// 隐藏界面右下角全屏按钮</span></span><br><span class="line">  geocoder: <span class="literal">false</span>, <span class="comment">// 隐藏界面右上角搜索按钮</span></span><br><span class="line">  homeButton: <span class="literal">false</span>, <span class="comment">// 隐藏界面右上角初始化地球位置按钮</span></span><br><span class="line">  sceneModePicker: <span class="literal">false</span>, <span class="comment">// 隐藏界面右上角视角切换按钮</span></span><br><span class="line">  timeline: <span class="literal">false</span>, <span class="comment">// 隐藏正下方时间线</span></span><br><span class="line">  navigationHelpButton: <span class="literal">false</span>, <span class="comment">// 隐藏右上角帮助按钮</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>仅仅是如此设置，底部还剩一段图片加文字信息，这里可以通过 <code>css</code> 手动隐藏。在 <code>style</code> 中添加如下代码。<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.cesium-viewer-bottom</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>如此，一个干净完整的地球便出现了<br><img src="https://2jedwh.coding-pages.com/blog/2019/12/clean-earth.png" alt="去掉控件的地球"></p><h3 id="去掉光圈"><a href="#去掉光圈" class="headerlink" title="去掉光圈"></a>去掉光圈</h3><p>如果有人觉得地球外层的光圈太扎眼，可以通过以下方式去除<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> Cesium.Viewer(<span class="string">'cesiumContainer'</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  skyAtmosphere: <span class="literal">false</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>效果如下<br><img src="https://2jedwh.coding-pages.com/blog/2019/12/no-sky-earth.png" alt="没有光晕的地球"></p><h3 id="聚焦框和信息框的隐藏"><a href="#聚焦框和信息框的隐藏" class="headerlink" title="聚焦框和信息框的隐藏"></a>聚焦框和信息框的隐藏</h3><p>默认情况下，如果左键双击 <code>cesium</code> 地图上的实体内容，<code>camera</code> 视角会自动聚焦过去，并显示自带的聚焦框以及实体的信息框，如下<br><img src="https://2jedwh.coding-pages.com/blog/2019/12/info-indicator.png" alt="带有信息框和聚焦框"><br>默认不显示聚焦框和信息框<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> Cesium.Viewer(<span class="string">'cesiumContainer'</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  selectionIndicator: <span class="literal">false</span>, <span class="comment">// 隐藏聚焦框</span></span><br><span class="line">  infoBox: <span class="literal">false</span>, <span class="comment">// 隐藏信息框</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>取消默认的左键双击实体效果，便于自定义其他交互<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">viewer.cesiumWidget.screenSpaceEventHandler.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_DOUBLE_CLICK);</span><br></pre></td></tr></table></figure></p><h3 id="地形加载"><a href="#地形加载" class="headerlink" title="地形加载"></a>地形加载</h3><p>初始化时默认加载地形<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> Cesium.Viewer(<span class="string">'cesiumContainer'</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  terrainProvider: Cesium.createWorldTerrain(&#123;</span><br><span class="line">    requestWaterMask: <span class="literal">true</span>,</span><br><span class="line">    requestVertexNormals: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>后期手动添加地形<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">viewer.terrainProvider = Cesium.createWorldTerrain(&#123;</span><br><span class="line">  requestWaterMask: <span class="literal">true</span>,</span><br><span class="line">  requestVertexNormals: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p><strong><em>坑</em></strong>：此方法加载地形时，加载的是 <code>cesium</code> 自己发布的地形服务。一旦 <code>cesium</code> 官方版本更新，则会导致地形加载失败（默认加载的底图也是如此）。浏览器控制台会报Token过期的错，但是实际上就算你更改了 <code>Cesium.Ion.defaultAccessToken</code> 的值仍然不能解决此问题。正确操作是，<strong>升级项目的 <code>cesium</code> 版本</strong>即可。最好的方法是，发布自己的地形以及底图服务，并加载。这样就不会受到 <code>cesium</code> 版本更新的影响。</p><h3 id="底图服务加载"><a href="#底图服务加载" class="headerlink" title="底图服务加载"></a>底图服务加载</h3><p><code>imageryProvider</code> 除了下面示例的 <code>ArcGisMapServerImageryProvider</code> 以外，还有分别用于加载其他不同框架底图服务的构造函数，具体内容，可在<a href="https://cesium.com/docs/cesiumjs-ref-doc/" target="_blank" rel="noopener">官方文档</a>中搜索 <code>imageryProvider</code> 查询。<br>初始化默认加载其他底图<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> viewer = <span class="keyword">new</span> Cesium.Viewer(<span class="string">'cesiumContainer'</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  imageryProvider: <span class="keyword">new</span> Cesium.ArcGisMapServerImageryProvider(&#123;</span><br><span class="line">    url: <span class="string">'https://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer'</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>后期手动添加底图<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewer.imageryLayers.addImageryProvider(<span class="keyword">new</span> Cesium.ArcGisMapServerImageryProvider(&#123;</span><br><span class="line">  url: <span class="string">'https://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer'</span></span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure></p><p>效果展示<br><img src="https://2jedwh.coding-pages.com/blog/2019/12/dark-earth.png" alt="黑暗"><br><strong><em>注</em></strong>：此坑与地形等同</p><h3 id="视角转换"><a href="#视角转换" class="headerlink" title="视角转换"></a>视角转换</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">viewer.scene.camera.flyTo(&#123;</span><br><span class="line">  destination: <span class="keyword">new</span> Cesium.Cartesian3.fromDegrees(<span class="number">106.49673</span>, <span class="number">29.61736</span>, <span class="number">1500</span>), <span class="comment">// 经纬度，高度</span></span><br><span class="line">  orientation: &#123;</span><br><span class="line">    heading: <span class="number">0</span>,</span><br><span class="line">    pitch: <span class="number">-0.52458664812464143</span>,</span><br><span class="line">    roll: <span class="number">2.0174972803488345e-11</span></span><br><span class="line">  &#125;,</span><br><span class="line">  duration: <span class="number">2</span>,</span><br><span class="line">  complete: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 飞行结束后执行逻辑</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><code>camera</code> 相关的所有操作在<a href="https://cesium.com/docs/cesiumjs-ref-doc/Camera.html?classFilter=camera" target="_blank" rel="noopener">此处</a>查看</p><h2 id="较为常用功能"><a href="#较为常用功能" class="headerlink" title="较为常用功能"></a>较为常用功能</h2><p>以下内容，涉及到具体私人发布使用的服务部分，只给出最为核心的代码片段，如何实现。需要读者<strong>自行发布或寻找服务</strong>进行测试</p><h3 id="geojson的加载使用"><a href="#geojson的加载使用" class="headerlink" title="geojson的加载使用"></a>geojson的加载使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jsonUrl = <span class="string">'...'</span>; <span class="comment">// 你的 geojson 文件路径，可以是本地相对路径</span></span><br><span class="line"><span class="keyword">const</span> mapJSON = Cesium.GeoJsonDataSource.load(jsonUrl, &#123;</span><br><span class="line">  <span class="comment">// 对 geojson 文件的初始配置，可在 https://cesium.com/docs/cesiumjs-ref-doc/GeoJsonDataSource.html 查看详情</span></span><br><span class="line">&#125;);</span><br><span class="line">viewer.dataSources.add(mapJSON); <span class="comment">// 将其加载到地图上去</span></span><br><span class="line">mapJSON.then(<span class="function"><span class="params">entities</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// entities 是该 geojson 内部所有实体的数组，可对实体进行属性变更的操作</span></span><br><span class="line">  entities.forEach(<span class="function"><span class="params">entity</span> =&gt;</span> &#123;</span><br><span class="line">    entity.show = <span class="literal">false</span>; <span class="comment">// 隐藏该实体</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="针对高精度倾斜摄影加载及显示效果优化"><a href="#针对高精度倾斜摄影加载及显示效果优化" class="headerlink" title="针对高精度倾斜摄影加载及显示效果优化"></a>针对高精度倾斜摄影加载及显示效果优化</h3><p>倾斜摄影数据以 <code>3dtile</code> 的形式加载出来，通常情况下，只需要有 <code>url</code> 就足够了。以下参数是由于倾斜摄影数据总数据太大，清晰度过高，从而调节参数进行性能优化。这不是一个通用的解决方案，但可以以此为参考。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> tileSetPromise = <span class="keyword">new</span> Cesium.Cesium3DTileset(&#123;</span><br><span class="line">  url: <span class="string">'...'</span>, <span class="comment">// 你的倾斜摄影服务发布地址</span></span><br><span class="line">  skipLevelOfDetail: <span class="literal">true</span>,</span><br><span class="line">  baseScreenSpaceError: <span class="number">1024</span>,</span><br><span class="line">  maximumScreenSpaceError: <span class="number">256</span>, <span class="comment">// 数值加大，能让最终成像变模糊</span></span><br><span class="line">  skipScreenSpaceErrorFactor: <span class="number">16</span>,</span><br><span class="line">  skipLevels: <span class="number">1</span>,</span><br><span class="line">  immediatelyLoadDesiredLevelOfDetail: <span class="literal">false</span>,</span><br><span class="line">  loadSiblings: <span class="literal">true</span>, <span class="comment">// 如果为true则不会在已加载完概况房屋后，自动从中心开始超清化房屋</span></span><br><span class="line">  cullWithChildrenBounds: <span class="literal">true</span>,</span><br><span class="line">  cullRequestsWhileMoving: <span class="literal">true</span>,</span><br><span class="line">  cullRequestsWhileMovingMultiplier: <span class="number">10</span>, <span class="comment">// 值越小能够更快的剔除</span></span><br><span class="line">  preloadWhenHidden: <span class="literal">true</span>,</span><br><span class="line">  preferLeaves: <span class="literal">true</span>,</span><br><span class="line">  maximumMemoryUsage: <span class="number">128</span>, <span class="comment">// 内存分配变小有利于倾斜摄影数据回收，提升性能体验</span></span><br><span class="line">  progressiveResolutionHeightFraction: <span class="number">0.5</span>, <span class="comment">// 数值偏于0能够让初始加载变得模糊</span></span><br><span class="line">  dynamicScreenSpaceErrorDensity: <span class="number">0.1</span>, <span class="comment">// 数值加大，能让周边加载变快</span></span><br><span class="line">  dynamicScreenSpaceErrorFactor: <span class="number">1</span>, <span class="comment">// 不知道起了什么作用没，反正放着吧先</span></span><br><span class="line">  dynamicScreenSpaceError: <span class="literal">true</span> <span class="comment">// 根据测试，有了这个后，会在真正的全屏加载完之后才清晰化房屋</span></span><br><span class="line">&#125;);</span><br><span class="line">tileSetPromise.readyPromise.then(<span class="function"><span class="params">tileSet</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">this</span>.scene.primitives.add(tileSet); <span class="comment">// 将倾斜摄影实体加载到地图上</span></span><br><span class="line">  <span class="keyword">this</span>.changeHeight(tileSet, <span class="number">310</span>); <span class="comment">// 将此 tileSet 提高 310 米</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可通过此函数，来修改 tileSet 的高度</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeHeight</span>(<span class="params">tileSet, height</span>) </span>&#123;</span><br><span class="line">  height = <span class="built_in">Number</span>(height);</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">isNaN</span>(height)) &#123; <span class="keyword">return</span>; &#125;</span><br><span class="line">  <span class="keyword">const</span> cartographic = Cesium.Cartographic.fromCartesian(tileSet.boundingSphere.center);</span><br><span class="line">  <span class="keyword">const</span> surface = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, cartographic.height);</span><br><span class="line">  <span class="keyword">const</span> offset = Cesium.Cartesian3.fromRadians(cartographic.longitude, cartographic.latitude, height);</span><br><span class="line">  <span class="keyword">const</span> translation = Cesium.Cartesian3.subtract(offset, surface, <span class="keyword">new</span> Cesium.Cartesian3());</span><br><span class="line">  tileSet.modelMatrix = Cesium.Matrix4.fromTranslation(translation);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="限制camera高度的上下限"><a href="#限制camera高度的上下限" class="headerlink" title="限制camera高度的上下限"></a>限制camera高度的上下限</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">viewer.scene.screenSpaceCameraController.maximumZoomDistance = <span class="number">65000</span>; <span class="comment">// 相机高度的最大值设定为 65000 米</span></span><br><span class="line">viewer.scene.screenSpaceCameraController.minimumZoomDistance = <span class="number">1000</span>; <span class="comment">// 相机高度的最小值设定为 1000 米</span></span><br></pre></td></tr></table></figure><h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handler = <span class="keyword">new</span> Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);</span><br><span class="line">handler.setInputAction(<span class="function"><span class="params">movement</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// movement.position 是一个 Cartesian2 对象，可以通过它拿到所点击的屏幕坐标</span></span><br><span class="line">&#125;, Cesium.ScreenSpaceEventType.LEFT_CLICK); <span class="comment">// 监听左键点击</span></span><br></pre></td></tr></table></figure><h3 id="通过Cartesian2获得经纬度的方式"><a href="#通过Cartesian2获得经纬度的方式" class="headerlink" title="通过Cartesian2获得经纬度的方式"></a>通过Cartesian2获得经纬度的方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> handler = <span class="keyword">new</span> Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);</span><br><span class="line">handler.setInputAction(<span class="function"><span class="params">movement</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> cartesian = <span class="keyword">this</span>.scene.globe.pick(<span class="keyword">this</span>.camera.getPickRay(movement.position), <span class="keyword">this</span>.scene); <span class="comment">// 获取空间坐标</span></span><br><span class="line">  <span class="keyword">const</span> cartographic = Cesium.Cartographic.fromCartesian(cartesian);</span><br><span class="line">  <span class="keyword">const</span> lon = Cesium.Math.toDegrees(cartographic.longitude); <span class="comment">// 经度</span></span><br><span class="line">  <span class="keyword">const</span> lat = Cesium.Math.toDegrees(cartographic.latitude); <span class="comment">// 纬度</span></span><br><span class="line">&#125;, Cesium.ScreenSpaceEventType.LEFT_CLICK); <span class="comment">// 监听左键点击</span></span><br></pre></td></tr></table></figure><h3 id="地图二三维转化"><a href="#地图二三维转化" class="headerlink" title="地图二三维转化"></a>地图二三维转化</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 地图转化为三维立体状态</span></span><br><span class="line">viewer.scene.morphTo3D(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 地图转化为二维平面状态</span></span><br><span class="line">viewer.scene.morphTo2D(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;由于工作原因，做了一些有关 &lt;code&gt;cesium&lt;/code&gt; 的三维地图开发。基于我所用到的功能，于此做一个入门总结，并记录下曾踩下的坑。初学者可依照以下整个完整流程，复现功能内容。做此记录时，&lt;code&gt;cesium&lt;/code&gt; 版本为 &lt;code&gt;^1.64.0
      
    
    </summary>
    
      <category term="技术相关" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/"/>
    
      <category term="三维地图" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/%E4%B8%89%E7%BB%B4%E5%9C%B0%E5%9B%BE/"/>
    
    
      <category term="js" scheme="https://blog.ykxkykx.cn/tags/js/"/>
    
      <category term="cesium" scheme="https://blog.ykxkykx.cn/tags/cesium/"/>
    
      <category term="三维地图" scheme="https://blog.ykxkykx.cn/tags/%E4%B8%89%E7%BB%B4%E5%9C%B0%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>简单的网页数字变更动画实现</title>
    <link href="https://blog.ykxkykx.cn/archives/a200942e.html"/>
    <id>https://blog.ykxkykx.cn/archives/a200942e.html</id>
    <published>2019-12-13T08:30:19.000Z</published>
    <updated>2020-02-20T01:42:16.567Z</updated>
    
    <content type="html"><![CDATA[<p>通常情况下，数字在网页中的变化是直接转变为另一个值。而如果在数字转化的过程中，每次改变一点点，最终转变为另一个值，会让干硬的网页变得更加生动一点。</p><hr><h2 id="分析拆解"><a href="#分析拆解" class="headerlink" title="分析拆解"></a>分析拆解</h2><p>数字变更的整个周期，主要分为三个状态。</p><ol><li>数字的初始状态（即原始值</li><li>数字变化中的状态（原始值到新赋值之间的变动</li><li>数字的结束状态（即新赋值</li></ol><p>状态的变化可能性</p><ol><li>数字一次性由少变到多，或者由多变到少</li><li>数字变化状态中，多次改变结束状态的值</li></ol><blockquote><p>这里解释下两种变化可能性，第一种就是说，数字的变化从少到多或者从多到少，都是一次性变化，中间不会有任何干扰。而第二种，打个比方，初始值为1，新赋值为10，数字在从1到10的渐变中，还没有变化完全，仅仅变到了7的时候，就被用户再一次改变了新赋值为5或者20（即可能比第一个新赋值低，也可能高）。这个时候，应该顺应此时已经变化到的数值7，以7为起点，向着5或者20去渐增或者渐减。不然，重新以1为起点开始向5或者20进行变化，就会有违和感。而顺应已经变化到的值进行变化，即便中途进行了再多次数值变更，整体的变化仍是流畅自然的。</p></blockquote><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>数值变化测试demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    html, body &#123;</span></span><br><span class="line"><span class="undefined">      margin: 0;</span></span><br><span class="line"><span class="undefined">      padding: 0;</span></span><br><span class="line"><span class="undefined">      height: 100%;</span></span><br><span class="line"><span class="undefined">      width: 100%;</span></span><br><span class="line"><span class="undefined">      background-color: cornflowerblue;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#app</span> &#123;</span></span><br><span class="line"><span class="undefined">      width: 100%;</span></span><br><span class="line"><span class="undefined">      height: 100%;</span></span><br><span class="line"><span class="undefined">      display: flex;</span></span><br><span class="line"><span class="undefined">      justify-content: center;</span></span><br><span class="line"><span class="undefined">      align-items: center;</span></span><br><span class="line"><span class="undefined">      flex-wrap: wrap;</span></span><br><span class="line"><span class="undefined">      align-content: center;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.num</span> &#123;</span></span><br><span class="line"><span class="undefined">      width: 100%;</span></span><br><span class="line"><span class="undefined">      font-size: 100px;</span></span><br><span class="line"><span class="undefined">      margin-bottom: 15px;</span></span><br><span class="line"><span class="undefined">      text-align: center;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"num"</span>&gt;</span>&#123;&#123; num.a &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"change(1)"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"change(5)"</span>&gt;</span>5<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"change(10)"</span>&gt;</span>10<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"change(20)"</span>&gt;</span>20<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"change(50)"</span>&gt;</span>50<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"change(75)"</span>&gt;</span>75<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"btn"</span> @<span class="attr">click</span>=<span class="string">"change(100)"</span>&gt;</span>100<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vue"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">      el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">      data: &#123;</span></span><br><span class="line"><span class="undefined">        num: &#123;</span></span><br><span class="line"><span class="undefined">          a: 0</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        aniMap: <span class="keyword">new</span> <span class="built_in">Map</span>()</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      methods: &#123;</span></span><br><span class="line"><span class="undefined">        change(newNum) &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.numAni(<span class="keyword">this</span>.num, <span class="string">'a'</span>, newNum, <span class="number">0</span>);</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="comment">// obj: 数字所在对象, key: 数字属性, newVal: 新变化的值，decimal: 变化期间的小数位数, name: 不同对象出现相同key值时，可自主设定name进行区分</span></span></span><br><span class="line"><span class="undefined">        numAni(obj, key, newVal, decimal, name) &#123; </span></span><br><span class="line"><span class="javascript">          newVal = <span class="built_in">Number</span>(newVal); <span class="comment">// 处理可能是字符串的数字内容</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> mapKey = name || key;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (<span class="keyword">this</span>.aniMap.has(mapKey)) &#123;</span></span><br><span class="line"><span class="javascript">            clearInterval(<span class="keyword">this</span>.aniMap.get(mapKey));</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.aniMap.delete(mapKey);</span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> diff = newVal - obj[key]; <span class="comment">// 差值</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">if</span> (diff === <span class="number">0</span>) &#123; <span class="keyword">return</span>; &#125;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">let</span> ch = <span class="built_in">Number</span>((<span class="built_in">Math</span>.abs(diff) / <span class="number">11</span>).toFixed(decimal)); <span class="comment">// 将变化的差值分作11份，进行10次变化</span></span></span><br><span class="line"><span class="xml">          ch = ch <span class="tag">&lt;<span class="name">=</span> <span class="attr">1</span> &amp;&amp; <span class="attr">decimal</span> === <span class="string">0</span> ? <span class="attr">1</span> <span class="attr">:</span> <span class="attr">ch</span>;</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">let</span> count = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> timer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> tempNum = <span class="built_in">Number</span>(obj[key]);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (count &lt; <span class="number">10</span>) &#123;</span></span><br><span class="line"><span class="undefined">              count += 1;</span></span><br><span class="line"><span class="undefined">              tempNum += diff &lt; 0 ? -ch : ch;</span></span><br><span class="line"><span class="javascript">              obj[key] = <span class="built_in">Number</span>(tempNum.toFixed(decimal));</span></span><br><span class="line"><span class="javascript">              <span class="keyword">if</span> (obj[key] === newVal) &#123;</span></span><br><span class="line"><span class="undefined">                obj[key] = newVal.toString();</span></span><br><span class="line"><span class="undefined">                clearInterval(timer);</span></span><br><span class="line"><span class="undefined">              &#125;</span></span><br><span class="line"><span class="javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">              obj[key] = newVal.toString();</span></span><br><span class="line"><span class="javascript">              <span class="keyword">this</span>.aniMap.delete(mapKey);</span></span><br><span class="line"><span class="undefined">              clearInterval(timer);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">          &#125;, <span class="number">20</span>); <span class="comment">// 每单次变化耗时20ms</span></span></span><br><span class="line"><span class="javascript">          <span class="keyword">this</span>.aniMap.set(mapKey, timer); <span class="comment">// 用于临时存储计时器返回值</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li>进行变化的数值变量，本身不能是一个单纯的基本变量，而应该存储在一个对象中。</li><li>此方法需要一个map来进行临时的计时器数据变量保存</li></ol><h2 id="展示效果"><a href="#展示效果" class="headerlink" title="展示效果"></a>展示效果</h2><p><img src="https://2jedwh.coding-pages.com/blog/2019/12/number-change.gif" height="100%"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;通常情况下，数字在网页中的变化是直接转变为另一个值。而如果在数字转化的过程中，每次改变一点点，最终转变为另一个值，会让干硬的网页变得更加生动一点。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;分析拆解&quot;&gt;&lt;a href=&quot;#分析拆解&quot; class=&quot;headerlink&quot; title
      
    
    </summary>
    
      <category term="技术相关" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/"/>
    
      <category term="Web" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/Web/"/>
    
    
      <category term="js" scheme="https://blog.ykxkykx.cn/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>在Vue工程中结合Element-Ui以及iconfont</title>
    <link href="https://blog.ykxkykx.cn/archives/f90b445.html"/>
    <id>https://blog.ykxkykx.cn/archives/f90b445.html</id>
    <published>2019-03-19T12:44:52.000Z</published>
    <updated>2020-02-20T01:42:16.567Z</updated>
    
    <content type="html"><![CDATA[<h4 id="iconfont的下载使用"><a href="#iconfont的下载使用" class="headerlink" title="iconfont的下载使用"></a>iconfont的下载使用</h4><p>首先，需要在<a href="https://www.iconfont.cn" target="_blank" rel="noopener">阿里巴巴应用图标库</a>中注册一个账号，然后找寻自己<strong>需要的图标</strong>，将他们加入<strong>购物车</strong>中。</p><p>然后点击<strong>购物车</strong>，将他们添加至同一个<strong>项目</strong>中（没有项目就新建）。进入<strong>我的项目</strong><br><img src="https://2jedwh.coding-pages.com/blog/2019/3/icon1.jpg" alt=""></p><p>最后，只需将以下文件加入工程中<br><img src="https://2jedwh.coding-pages.com/blog/2019/3/icon2.jpg" alt=""></p><p>再在 <code>main.js</code> 文件中，引入 <code>iconfont.css</code> 文件即可，例如<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路径为你自己存放的路径</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'../../iconfont.css'</span></span><br></pre></td></tr></table></figure></p><h4 id="对iconfont-css-进行修改"><a href="#对iconfont-css-进行修改" class="headerlink" title="对iconfont.css 进行修改"></a>对iconfont.css 进行修改</h4><p>只需要修改 <code>.iconfont</code> 里面的内容就好<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">**除了font-family以外，其余内容与 element 框架中 icon 的配置相同</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.iconfont</span> &#123;</span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">"iconfont"</span> <span class="meta">!important</span>;</span><br><span class="line"><span class="attribute">speak</span>: none;</span><br><span class="line"><span class="attribute">font-style</span>: normal;</span><br><span class="line"><span class="attribute">font-weight</span>: <span class="number">400</span>;</span><br><span class="line"><span class="attribute">font-variant</span>: normal;</span><br><span class="line"><span class="attribute">text-transform</span>: none;</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line"><span class="attribute">vertical-align</span>: baseline;</span><br><span class="line"><span class="attribute">display</span>: inline-block;</span><br><span class="line"><span class="attribute">-webkit-font-smoothing</span>: antialiased;</span><br><span class="line"><span class="attribute">-moz-osx-font-smoothing</span>: grayscale;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="在代码中直接使用"><a href="#在代码中直接使用" class="headerlink" title="在代码中直接使用"></a>在代码中直接使用</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">** 首先，保证 iconfont.css 文件里面这样的内容没被删除</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.icon-my-email</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\e643"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-my-password</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\e611"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon-my-user</span><span class="selector-pseudo">:before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">"\e614"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样我们就可以通过在 <code>html</code> 代码中使用，示例如下<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"iconfont icon-my-email"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 也可以直接在 element 组件中直接使用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"密码"</span> <span class="attr">prefix-icon</span>=<span class="string">"iconfont icon-my-password"</span> <span class="attr">suffix-icon</span>=<span class="string">"el-icon-view"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;iconfont的下载使用&quot;&gt;&lt;a href=&quot;#iconfont的下载使用&quot; class=&quot;headerlink&quot; title=&quot;iconfont的下载使用&quot;&gt;&lt;/a&gt;iconfont的下载使用&lt;/h4&gt;&lt;p&gt;首先，需要在&lt;a href=&quot;https://www
      
    
    </summary>
    
      <category term="技术相关" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/"/>
    
      <category term="Web" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/Web/"/>
    
    
      <category term="Vue" scheme="https://blog.ykxkykx.cn/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>hexo博客实现url锚点与markdown分级标题同步</title>
    <link href="https://blog.ykxkykx.cn/archives/6c1ee162.html"/>
    <id>https://blog.ykxkykx.cn/archives/6c1ee162.html</id>
    <published>2019-03-19T12:44:52.000Z</published>
    <updated>2020-02-20T01:42:16.567Z</updated>
    
    <content type="html"><![CDATA[<h4 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h4><p>有的网页页面，可以在页面滚动的时候，给 <code>url</code> 自动添加或者改变锚点，锚点内容即为当前页面正在显示的内容的分级标题。我希望自己的博客页面也能有这样的效果，这样的话，复制 <code>url</code> 的时候就可以带上锚点，打开后就能快速定位到需要查看的内容处。</p><h4 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h4><p>要实现这个功能，做到以下两点就可以了</p><ol><li>判断位于当前浏览器视口顶部的元素属于哪一个分级标题的内容</li><li>将当前分级标题的 <code>id</code> 名作为锚点添加或修改到 url 尾部</li></ol><p>打开控制台，可以看到，hexo next 的主题，通过 markdown 渲染出的内容，包含在 <code>class</code> 为 <code>post-block</code> 的元素中。<br><img src="https://2jedwh.coding-pages.com/blog/2019/3/img1.jpg" alt=""></p><p>而所有的分级标题渲染出来后，会依次对应 <code>html</code> 的 <code>h1</code> 到 <code>h6</code> 标签，且 <code>id</code> 名与标题等同。（不过空格会被替换为 - )<br><img src="https://2jedwh.coding-pages.com/blog/2019/3/img2.jpg" alt=""></p><h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><h5 id="判断分级标题的内容"><a href="#判断分级标题的内容" class="headerlink" title="判断分级标题的内容"></a>判断分级标题的内容</h5><p>我们可以通过 <code>Element.getBoundingClientRect().top</code> 来获取一个 dom 元素的顶部与视口顶部的距离，如果得到一个负值，那么证明这个元素是在视口之上、或者正处于视口中。我们要的就是处于视口上的那个元素。获取它的 <code>id</code> 即可。</p><h5 id="修改-URL，添加或者改变锚点内容"><a href="#修改-URL，添加或者改变锚点内容" class="headerlink" title="修改 URL，添加或者改变锚点内容"></a>修改 URL，添加或者改变锚点内容</h5><p>利用 HTML5 的历史记录 API，<code>history.replaceState</code>，它可以修改当前历史记录项，改变 url 信息，但却不会引起 url 跳转。</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 按从上到下的先后顺序，获取 .post-body 里面所有的 h 标签</span></span><br><span class="line"><span class="keyword">let</span> hList = <span class="built_in">document</span>.querySelectorAll(<span class="string">'.post-body h1,.post-body h2,.post-body h3,.post-body h4,.post-body h5,.post-body h6'</span>);</span><br><span class="line"><span class="keyword">let</span> nowAnchor = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">let</span> time = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 事件节流，每 100ms 进行一次判断</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Date</span>.now() - time &gt;= <span class="number">100</span>) &#123;</span><br><span class="line">    <span class="comment">// 逆向查找，找到的第一个负值所对应的元素即为我们需要的</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = hList.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="keyword">if</span> (hList[i].getBoundingClientRect().top &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (hList[i].id !== nowAnchor) &#123;</span><br><span class="line">          <span class="keyword">let</span> href = location.href.includes(<span class="string">'#'</span>) ? location.href.split(<span class="string">'#'</span>)[<span class="number">0</span>] : location.href;</span><br><span class="line">          nowAnchor = hList[i].id;</span><br><span class="line">          history.replaceState(&#123;&#125;, <span class="string">''</span>, <span class="string">`<span class="subst">$&#123;href&#125;</span>#<span class="subst">$&#123;nowAnchor&#125;</span>`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    time = <span class="built_in">Date</span>.now();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h4><p>虽然实现了我想要的这个功能，可是在每一次 url 更新的时候，hexo next 自带配置的 pace 加载进度条特效也会重新进行一次，而我只希望他只在初次打开的时候有特效，更新锚点的时候不要搞事。搞了一阵子，失败了，忍痛关闭此特效功能。</p><p><img src="https://2jedwh.coding-pages.com/blog/2019/3/img3.jpg" width="35%" height="50%"></p><p>如果有大佬有好的解决办法，望告知，感激不尽！</p><p><img src="https://2jedwh.coding-pages.com/blog/2019/3/img4.jpg" width="35%" height="50%"></p><h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener">MDN: Element.getBoundingClientRect()</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/History_API" target="_blank" rel="noopener">MDN: History_API</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;起因&quot;&gt;&lt;a href=&quot;#起因&quot; class=&quot;headerlink&quot; title=&quot;起因&quot;&gt;&lt;/a&gt;起因&lt;/h4&gt;&lt;p&gt;有的网页页面，可以在页面滚动的时候，给 &lt;code&gt;url&lt;/code&gt; 自动添加或者改变锚点，锚点内容即为当前页面正在显示的内容的分级标题
      
    
    </summary>
    
      <category term="技术相关" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/"/>
    
      <category term="Web" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/Web/"/>
    
    
      <category term="锚点" scheme="https://blog.ykxkykx.cn/tags/%E9%94%9A%E7%82%B9/"/>
    
      <category term="标题" scheme="https://blog.ykxkykx.cn/tags/%E6%A0%87%E9%A2%98/"/>
    
      <category term="同步" scheme="https://blog.ykxkykx.cn/tags/%E5%90%8C%E6%AD%A5/"/>
    
  </entry>
  
  <entry>
    <title>复制页面内容添加版权声明</title>
    <link href="https://blog.ykxkykx.cn/archives/a6151438.html"/>
    <id>https://blog.ykxkykx.cn/archives/a6151438.html</id>
    <published>2019-01-18T02:22:15.000Z</published>
    <updated>2020-02-20T01:38:05.381Z</updated>
    
    <content type="html"><![CDATA[<p>现如今，如果你要直接复制简书、掘金、CSDN 等网站上文章的内容，当你粘贴的时候就会发现，复制的文字中多了几行版权信息。</p><p>通常是这样的内容：</p><blockquote><p>作者：【作者名】<br>链接：【当前网页链接】<br>来源：【站点名】<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处</p></blockquote><hr><p>实现方式如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 确定好会添加版权信息的复制范围，在类名为 post-body 的 dom 元素内</span></span><br><span class="line"><span class="keyword">var</span> copyPreventContent = <span class="built_in">document</span>.querySelector(<span class="string">'.post-body'</span>)</span><br><span class="line">copyPreventContent.addEventListener(<span class="string">'copy'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// window.getSelection()返回一个 Selection 对象，此对象表示用户选择的文本范围或插入符号的当前位置</span></span><br><span class="line">  <span class="comment">// 调用 Selection 对象的 toString() 函数，会返回被选中区域中的纯文本</span></span><br><span class="line">  <span class="keyword">var</span> finalCopyContents = <span class="built_in">window</span>.getSelection().toString()</span><br><span class="line">  <span class="keyword">if</span>(finalCopyContents) &#123;</span><br><span class="line">    <span class="keyword">var</span> finalCopyContents = finalCopyContents +</span><br><span class="line">    <span class="string">"\n\n作者：【 作者名 】"</span> +</span><br><span class="line">    <span class="string">"\n链接：【 当前页面链接 】"</span> +</span><br><span class="line">    <span class="string">"\n来源：【 当前站点名字 】"</span> +</span><br><span class="line">    <span class="string">"\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用 setData() 方法，复制 clipboardData 的内容到到剪切板</span></span><br><span class="line">    e.clipboardData.setData(<span class="string">'text/plain'</span>, finalCopyContents)</span><br><span class="line">    e.clipboardData.setData(<span class="string">'text/html'</span>, <span class="string">`&lt;b&gt;<span class="subst">$&#123;finalCopyContents&#125;</span>&lt;/b&gt;`</span>)</span><br><span class="line">    e.preventDefault()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><hr><p>参考资料：</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Events/copy" target="_blank" rel="noopener">MDN: copy</a><br><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Selection" target="_blank" rel="noopener">MDN: Selection</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;现如今，如果你要直接复制简书、掘金、CSDN 等网站上文章的内容，当你粘贴的时候就会发现，复制的文字中多了几行版权信息。&lt;/p&gt;
&lt;p&gt;通常是这样的内容：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;作者：【作者名】&lt;br&gt;链接：【当前网页链接】&lt;br&gt;来源：【站点名】&lt;br&gt;
      
    
    </summary>
    
      <category term="技术相关" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/"/>
    
      <category term="Web" scheme="https://blog.ykxkykx.cn/categories/%E6%8A%80%E6%9C%AF%E7%9B%B8%E5%85%B3/Web/"/>
    
    
      <category term="版权" scheme="https://blog.ykxkykx.cn/tags/%E7%89%88%E6%9D%83/"/>
    
  </entry>
  
  <entry>
    <title>乐理基础学习</title>
    <link href="https://blog.ykxkykx.cn/archives/575840b6.html"/>
    <id>https://blog.ykxkykx.cn/archives/575840b6.html</id>
    <published>2019-01-16T08:17:50.000Z</published>
    <updated>2020-02-20T01:42:16.567Z</updated>
    
    <content type="html"><![CDATA[<h4 id="声波频率及标准-A"><a href="#声波频率及标准-A" class="headerlink" title="声波频率及标准 A"></a>声波频率及标准 A</h4><p>声波：物体震动产生，并通过介质传播</p><p>频率：物体每一秒震动的次数</p><p>国际通用音高标准：频率为440赫兹发出的音高为标准 A</p><p>每高（低）一个八度，赫兹数就会加倍（减半）</p><h5 id="音高频率对照表"><a href="#音高频率对照表" class="headerlink" title="音高频率对照表"></a>音高频率对照表</h5><p><img src="https://2jedwh.coding-pages.com/blog/2019/1/imgs音的波形.jpg" alt="音高频率对照表"></p><p>注：<em>记住中央C这个八度，12个音的所有赫兹数，就相当于能记住整个表格的赫兹数目</em></p><blockquote><p>溯源：<a href="https://www.bilibili.com/video/av8481394" target="_blank" rel="noopener">声波频率及标准A</a></p></blockquote><h4 id="音的性质和分类"><a href="#音的性质和分类" class="headerlink" title="音的性质和分类"></a>音的性质和分类</h4><p>音的性质：音高（高低）、音量（强弱）、音质（长短）、音色</p><p>音：分为乐音（旋律中体现音高的音），噪音（打击乐，发动机响等没有明显体现音高的音）</p><p>频率高，则音高，反之小。振幅越大，则响度大，反之小</p><p><img src="https://2jedwh.coding-pages.com/blog/2019/1/imgs音高频率对照表.png" alt="音的波形"></p><blockquote><p>溯源：<a href="https://www.bilibili.com/video/av8481394/?p=2" target="_blank" rel="noopener">音高频率对照表</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;声波频率及标准-A&quot;&gt;&lt;a href=&quot;#声波频率及标准-A&quot; class=&quot;headerlink&quot; title=&quot;声波频率及标准 A&quot;&gt;&lt;/a&gt;声波频率及标准 A&lt;/h4&gt;&lt;p&gt;声波：物体震动产生，并通过介质传播&lt;/p&gt;
&lt;p&gt;频率：物体每一秒震动的次数&lt;/p&gt;
      
    
    </summary>
    
      <category term="音乐相关" scheme="https://blog.ykxkykx.cn/categories/%E9%9F%B3%E4%B9%90%E7%9B%B8%E5%85%B3/"/>
    
      <category term="音乐理论" scheme="https://blog.ykxkykx.cn/categories/%E9%9F%B3%E4%B9%90%E7%9B%B8%E5%85%B3/%E9%9F%B3%E4%B9%90%E7%90%86%E8%AE%BA/"/>
    
    
      <category term="声波" scheme="https://blog.ykxkykx.cn/tags/%E5%A3%B0%E6%B3%A2/"/>
    
      <category term="音高" scheme="https://blog.ykxkykx.cn/tags/%E9%9F%B3%E9%AB%98/"/>
    
  </entry>
  
  <entry>
    <title>费曼技巧问答式总结</title>
    <link href="https://blog.ykxkykx.cn/archives/896890d3.html"/>
    <id>https://blog.ykxkykx.cn/archives/896890d3.html</id>
    <published>2019-01-16T07:04:21.000Z</published>
    <updated>2020-02-20T01:42:16.567Z</updated>
    
    <content type="html"><![CDATA[<h5 id="费曼技巧是什么？"><a href="#费曼技巧是什么？" class="headerlink" title="费曼技巧是什么？"></a>费曼技巧是什么？</h5><p>费曼技巧，是一种通过模拟教育他人，来判断自己是否真的掌握了某项知识的学习技巧。</p><h5 id="为什么费曼技巧有着这样的作用？"><a href="#为什么费曼技巧有着这样的作用？" class="headerlink" title="为什么费曼技巧有着这样的作用？"></a>为什么费曼技巧有着这样的作用？</h5><p>因为费曼技巧符合大脑的认知规律。</p><h5 id="怎样具体应用费曼技巧？"><a href="#怎样具体应用费曼技巧？" class="headerlink" title="怎样具体应用费曼技巧？"></a>怎样具体应用费曼技巧？</h5><p><img src="https://2jedwh.coding-pages.com/blog/2019/1/费曼技巧.jpg" alt=""></p><h5 id="实践费曼技巧后，掌握知识的表现是什么？"><a href="#实践费曼技巧后，掌握知识的表现是什么？" class="headerlink" title="实践费曼技巧后，掌握知识的表现是什么？"></a>实践费曼技巧后，掌握知识的表现是什么？</h5><p>能够用极其简单具象的东西，来回答高度抽象的问题。</p><h5 id="费曼技巧可以用来干什么？"><a href="#费曼技巧可以用来干什么？" class="headerlink" title="费曼技巧可以用来干什么？"></a>费曼技巧可以用来干什么？</h5><p>学习任何知识，技能，深入理解其本质。</p><hr><p>参考资料：</p><blockquote><p><a href="https://www.zhihu.com/question/20576786/answer/21770899" target="_blank" rel="noopener">如何应用费曼技巧</a></p><p><a href="https://www.zhihu.com/question/20576786/answer/29048655" target="_blank" rel="noopener">让大脑从混沌走向有序</a></p><p><a href="https://www.zhihu.com/question/20571226/answer/15516872" target="_blank" rel="noopener">刻意练习的方法</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h5 id=&quot;费曼技巧是什么？&quot;&gt;&lt;a href=&quot;#费曼技巧是什么？&quot; class=&quot;headerlink&quot; title=&quot;费曼技巧是什么？&quot;&gt;&lt;/a&gt;费曼技巧是什么？&lt;/h5&gt;&lt;p&gt;费曼技巧，是一种通过模拟教育他人，来判断自己是否真的掌握了某项知识的学习技巧。&lt;/p&gt;
&lt;h
      
    
    </summary>
    
      <category term="方法与技巧" scheme="https://blog.ykxkykx.cn/categories/%E6%96%B9%E6%B3%95%E4%B8%8E%E6%8A%80%E5%B7%A7/"/>
    
      <category term="学习方法" scheme="https://blog.ykxkykx.cn/categories/%E6%96%B9%E6%B3%95%E4%B8%8E%E6%8A%80%E5%B7%A7/%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"/>
    
    
      <category term="费曼技巧" scheme="https://blog.ykxkykx.cn/tags/%E8%B4%B9%E6%9B%BC%E6%8A%80%E5%B7%A7/"/>
    
  </entry>
  
  <entry>
    <title>ubuntu16.04下配置node.js和npm，以及npm的权限处理</title>
    <link href="https://blog.ykxkykx.cn/archives/c9a9fe7a.html"/>
    <id>https://blog.ykxkykx.cn/archives/c9a9fe7a.html</id>
    <published>2017-01-15T13:45:48.000Z</published>
    <updated>2020-02-20T01:38:05.379Z</updated>
    
    <content type="html"><![CDATA[<p>npm在ubuntu下需要root权限一直是一件很让人苦恼的事情，为了合理安全的使用npm，需要在安装好npm之后，对其进行一些必要的处理</p><p>此处安装的是8.x的node版本，最新安装方式以<strong><a href="https://nodejs.org/en/download/package-manager/" target="_blank" rel="noopener">node官网</a></strong>为准</p><p>想在windows或者MacOS下配置的同学请移步<strong><a href="http://www.runoob.com/nodejs/nodejs-install-setup.html" target="_blank" rel="noopener">这里</a></strong></p><hr><h2 id="依次执行这两条命令，安装好node-js，同时会一并安装好npm"><a href="#依次执行这两条命令，安装好node-js，同时会一并安装好npm" class="headerlink" title="依次执行这两条命令，安装好node.js，同时会一并安装好npm"></a>依次执行这两条命令，安装好node.js，同时会一并安装好npm</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sL https://deb.nodesource.com/setup_8.x | sudo -E bash -</span><br><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure><h2 id="通过以下两条命令可以查看已经安装好的node以及npm的版本号"><a href="#通过以下两条命令可以查看已经安装好的node以及npm的版本号" class="headerlink" title="通过以下两条命令可以查看已经安装好的node以及npm的版本号"></a>通过以下两条命令可以查看已经安装好的node以及npm的版本号</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>若无异常，现在的版本会分别显示<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v8.4.0</span><br><span class="line">5.3.0</span><br></pre></td></tr></table></figure></p><h2 id="现在开始处理npm的权限问题，最新方式以npm官网为准"><a href="#现在开始处理npm的权限问题，最新方式以npm官网为准" class="headerlink" title="现在开始处理npm的权限问题，最新方式以npm官网为准"></a>现在开始处理npm的权限问题，最新方式以<a href="https://docs.npmjs.com/getting-started/fixing-npm-permissions" target="_blank" rel="noopener">npm官网</a>为准</h2><p>1.执行此命令，创建一个隐藏目录用于全局安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.npm-global</span><br></pre></td></tr></table></figure></p><p>2.执行此命令，配置npm使用这个新目录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config set prefix &apos;~/.npm-global&apos;</span><br></pre></td></tr></table></figure></p><p>3.执行此命令，打开“~/.profile”文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gedit ~/.profile</span><br></pre></td></tr></table></figure></p><p>在“~/.profile”文件底部添加这一行代码，并且保存文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=~/.npm-global/bin:$PATH</span><br></pre></td></tr></table></figure></p><p>4.执行此命令，更新系统变量：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure></p><p>5.执行此命令，查看默认目录是否修改成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config get prefix</span><br></pre></td></tr></table></figure></p><p>6.不使用sudo，全局安装一个包进行测试，若不报错，则npm权限问题完美解决<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g express</span><br></pre></td></tr></table></figure></p><p><em>注：</em> 官网上共有三种解决方法，一是将npm默认路径目录的拥有者由root用户改为当前用户，二是自己新建一个当前用户下的目录，将npm的默认目录改为此目录，三是使用Homebrew包管理器来解决问题，由于ubuntu16.04下npm的默认路径是在/usr下而不是在/usr/local下，所以方法一可能会造成设置错误，而方法三仅适用于macOS系统，本文只给出了方法二的解决方式，若有兴趣的小伙伴可以去npm官网查看方法一的处理方式。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;npm在ubuntu下需要root权限一直是一件很让人苦恼的事情，为了合理安全的使用npm，需要在安装好npm之后，对其进行一些必要的处理&lt;/p&gt;
&lt;p&gt;此处安装的是8.x的node版本，最新安装方式以&lt;strong&gt;&lt;a href=&quot;https://nodejs.org/
      
    
    </summary>
    
    
      <category term="ubuntu" scheme="https://blog.ykxkykx.cn/tags/ubuntu/"/>
    
      <category term="node" scheme="https://blog.ykxkykx.cn/tags/node/"/>
    
      <category term="npm" scheme="https://blog.ykxkykx.cn/tags/npm/"/>
    
  </entry>
  
</feed>
